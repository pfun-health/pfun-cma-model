{
  "resource": {
    "aws_lambda_layer_version": {
      "managed-layer": {
        "layer_name": "pfun-cma-model-dev-managed-layer",
        "compatible_runtimes": [
          "python3.10"
        ],
        "filename": "${path.module}/layer-deployment.zip",
        "source_code_hash": "${filebase64sha256(\"${path.module}/layer-deployment.zip\")}"
      }
    },
    "aws_iam_role": {
      "update_index_resources_role": {
        "name": "pfun-cma-model-dev-update_index_resources",
        "assume_role_policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"\", \"Effect\": \"Allow\", \"Principal\": {\"Service\": \"lambda.amazonaws.com\"}, \"Action\": \"sts:AssumeRole\"}]}"
      },
      "api_handler_role": {
        "name": "pfun-cma-model-dev-api_handler",
        "assume_role_policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"\", \"Effect\": \"Allow\", \"Principal\": {\"Service\": \"lambda.amazonaws.com\"}, \"Action\": \"sts:AssumeRole\"}]}"
      },
      "websocket_connect_role": {
        "name": "pfun-cma-model-dev-websocket_connect",
        "assume_role_policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"\", \"Effect\": \"Allow\", \"Principal\": {\"Service\": \"lambda.amazonaws.com\"}, \"Action\": \"sts:AssumeRole\"}]}"
      },
      "websocket_message_role": {
        "name": "pfun-cma-model-dev-websocket_message",
        "assume_role_policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"\", \"Effect\": \"Allow\", \"Principal\": {\"Service\": \"lambda.amazonaws.com\"}, \"Action\": \"sts:AssumeRole\"}]}"
      }
    },
    "aws_iam_role_policy": {
      "update_index_resources_role": {
        "name": "update_index_resources_rolePolicy",
        "policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"GetSecretPFunModel\", \"Effect\": \"Allow\", \"Action\": [\"secretsmanager:GetSecretValue\"], \"Resource\": [\"arn:aws:secretsmanager:us-east-1:860311922912:secret:*\", \"arn:aws:secretsmanager:us-east-1:860311922912:secret:pfun-cma-model-rapidapi-key-YafFYb\", \"arn:aws:secretsmanager:us-east-1:860311922912:secret:pfun-cma-model-rapid-api-proxy-secret-fyV6L1\"]}, {\"Sid\": \"AllowCreateLogGroupPFunModel\", \"Action\": [\"logs:CreateLogGroup\", \"logs:CreateLogStream\", \"logs:PutLogEvents\"], \"Resource\": \"arn:aws:logs:*:*:*\", \"Effect\": \"Allow\"}, {\"Action\": [\"s3:GetObject\", \"s3:ListBucket\"], \"Resource\": \"arn:aws:s3:::pfun-cma-model-www*\", \"Effect\": \"Allow\"}, {\"Action\": [\"iam:PassRole\"], \"Resource\": \"arn:aws:iam::*:role/pfun-cma-model-dev\", \"Effect\": \"Allow\"}, {\"Sid\": \"AllowAPIGatewayInvokePFunModel\", \"Action\": [\"apigateway:*\"], \"Resource\": \"arn:aws:apigateway:us-east-1::/restapis\", \"Effect\": \"Allow\"}]}",
        "role": "${aws_iam_role.update_index_resources_role.id}"
      },
      "api_handler_role": {
        "name": "api_handler_rolePolicy",
        "policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"GetSecretPFunModel\", \"Effect\": \"Allow\", \"Action\": [\"secretsmanager:GetSecretValue\"], \"Resource\": [\"arn:aws:secretsmanager:us-east-1:860311922912:secret:*\", \"arn:aws:secretsmanager:us-east-1:860311922912:secret:pfun-cma-model-rapidapi-key-YafFYb\", \"arn:aws:secretsmanager:us-east-1:860311922912:secret:pfun-cma-model-rapid-api-proxy-secret-fyV6L1\"]}, {\"Sid\": \"AllowCreateLogGroupPFunModel\", \"Action\": [\"logs:CreateLogGroup\", \"logs:CreateLogStream\", \"logs:PutLogEvents\"], \"Resource\": \"arn:aws:logs:*:*:*\", \"Effect\": \"Allow\"}, {\"Action\": [\"s3:GetObject\", \"s3:ListBucket\"], \"Resource\": \"arn:aws:s3:::pfun-cma-model-www*\", \"Effect\": \"Allow\"}, {\"Action\": [\"iam:PassRole\"], \"Resource\": \"arn:aws:iam::*:role/pfun-cma-model-dev\", \"Effect\": \"Allow\"}, {\"Sid\": \"AllowAPIGatewayInvokePFunModel\", \"Action\": [\"apigateway:*\"], \"Resource\": \"arn:aws:apigateway:us-east-1::/restapis\", \"Effect\": \"Allow\"}]}",
        "role": "${aws_iam_role.api_handler_role.id}"
      },
      "websocket_connect_role": {
        "name": "websocket_connect_rolePolicy",
        "policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"GetSecretPFunModel\", \"Effect\": \"Allow\", \"Action\": [\"secretsmanager:GetSecretValue\"], \"Resource\": [\"arn:aws:secretsmanager:us-east-1:860311922912:secret:*\", \"arn:aws:secretsmanager:us-east-1:860311922912:secret:pfun-cma-model-rapidapi-key-YafFYb\", \"arn:aws:secretsmanager:us-east-1:860311922912:secret:pfun-cma-model-rapid-api-proxy-secret-fyV6L1\"]}, {\"Sid\": \"AllowCreateLogGroupPFunModel\", \"Action\": [\"logs:CreateLogGroup\", \"logs:CreateLogStream\", \"logs:PutLogEvents\"], \"Resource\": \"arn:aws:logs:*:*:*\", \"Effect\": \"Allow\"}, {\"Action\": [\"s3:GetObject\", \"s3:ListBucket\"], \"Resource\": \"arn:aws:s3:::pfun-cma-model-www*\", \"Effect\": \"Allow\"}, {\"Action\": [\"iam:PassRole\"], \"Resource\": \"arn:aws:iam::*:role/pfun-cma-model-dev\", \"Effect\": \"Allow\"}, {\"Sid\": \"AllowAPIGatewayInvokePFunModel\", \"Action\": [\"apigateway:*\"], \"Resource\": \"arn:aws:apigateway:us-east-1::/restapis\", \"Effect\": \"Allow\"}]}",
        "role": "${aws_iam_role.websocket_connect_role.id}"
      },
      "websocket_message_role": {
        "name": "websocket_message_rolePolicy",
        "policy": "{\"Version\": \"2012-10-17\", \"Statement\": [{\"Sid\": \"GetSecretPFunModel\", \"Effect\": \"Allow\", \"Action\": [\"secretsmanager:GetSecretValue\"], \"Resource\": [\"arn:aws:secretsmanager:us-east-1:860311922912:secret:*\", \"arn:aws:secretsmanager:us-east-1:860311922912:secret:pfun-cma-model-rapidapi-key-YafFYb\", \"arn:aws:secretsmanager:us-east-1:860311922912:secret:pfun-cma-model-rapid-api-proxy-secret-fyV6L1\"]}, {\"Sid\": \"AllowCreateLogGroupPFunModel\", \"Action\": [\"logs:CreateLogGroup\", \"logs:CreateLogStream\", \"logs:PutLogEvents\"], \"Resource\": \"arn:aws:logs:*:*:*\", \"Effect\": \"Allow\"}, {\"Action\": [\"s3:GetObject\", \"s3:ListBucket\"], \"Resource\": \"arn:aws:s3:::pfun-cma-model-www*\", \"Effect\": \"Allow\"}, {\"Action\": [\"iam:PassRole\"], \"Resource\": \"arn:aws:iam::*:role/pfun-cma-model-dev\", \"Effect\": \"Allow\"}, {\"Sid\": \"AllowAPIGatewayInvokePFunModel\", \"Action\": [\"apigateway:*\"], \"Resource\": \"arn:aws:apigateway:us-east-1::/restapis\", \"Effect\": \"Allow\"}]}",
        "role": "${aws_iam_role.websocket_message_role.id}"
      }
    },
    "aws_lambda_function": {
      "update_index_resources": {
        "function_name": "pfun-cma-model-dev-update_index_resources",
        "runtime": "python3.10",
        "handler": "app.update_index_resources",
        "memory_size": 128,
        "tags": {
          "aws-chalice": "version=1.29.0:stage=dev:app=pfun-cma-model"
        },
        "timeout": 60,
        "source_code_hash": "${filebase64sha256(\"${path.module}/deployment.zip\")}",
        "filename": "${path.module}/deployment.zip",
        "environment": {
          "variables": {
            "DEBUG_CHALICE": "1"
          }
        },
        "layers": [
          "${aws_lambda_layer_version.managed-layer.arn}",
          "arn:aws:lambda:us-east-1:860311922912:layer:pfun-cma-model-deps-dev-managed-layer:14"
        ],
        "role": "${aws_iam_role.update_index_resources_role.arn}"
      },
      "api_handler": {
        "function_name": "pfun-cma-model-dev",
        "runtime": "python3.10",
        "handler": "app.app",
        "memory_size": 128,
        "tags": {
          "aws-chalice": "version=1.29.0:stage=dev:app=pfun-cma-model"
        },
        "timeout": 60,
        "source_code_hash": "${filebase64sha256(\"${path.module}/deployment.zip\")}",
        "filename": "${path.module}/deployment.zip",
        "environment": {
          "variables": {
            "DEBUG_CHALICE": "1"
          }
        },
        "layers": [
          "${aws_lambda_layer_version.managed-layer.arn}",
          "arn:aws:lambda:us-east-1:860311922912:layer:pfun-cma-model-deps-dev-managed-layer:14"
        ],
        "role": "${aws_iam_role.api_handler_role.arn}"
      },
      "websocket_connect": {
        "function_name": "pfun-cma-model-dev-websocket_connect",
        "runtime": "python3.10",
        "handler": "app.run_at_time_connect",
        "memory_size": 128,
        "tags": {
          "aws-chalice": "version=1.29.0:stage=dev:app=pfun-cma-model"
        },
        "timeout": 60,
        "source_code_hash": "${filebase64sha256(\"${path.module}/deployment.zip\")}",
        "filename": "${path.module}/deployment.zip",
        "environment": {
          "variables": {
            "DEBUG_CHALICE": "1"
          }
        },
        "layers": [
          "${aws_lambda_layer_version.managed-layer.arn}",
          "arn:aws:lambda:us-east-1:860311922912:layer:pfun-cma-model-deps-dev-managed-layer:14"
        ],
        "role": "${aws_iam_role.websocket_connect_role.arn}"
      },
      "websocket_message": {
        "function_name": "pfun-cma-model-dev-websocket_message",
        "runtime": "python3.10",
        "handler": "app.run_at_time_ws",
        "memory_size": 128,
        "tags": {
          "aws-chalice": "version=1.29.0:stage=dev:app=pfun-cma-model"
        },
        "timeout": 60,
        "source_code_hash": "${filebase64sha256(\"${path.module}/deployment.zip\")}",
        "filename": "${path.module}/deployment.zip",
        "environment": {
          "variables": {
            "DEBUG_CHALICE": "1"
          }
        },
        "layers": [
          "${aws_lambda_layer_version.managed-layer.arn}",
          "arn:aws:lambda:us-east-1:860311922912:layer:pfun-cma-model-deps-dev-managed-layer:14"
        ],
        "role": "${aws_iam_role.websocket_message_role.arn}"
      }
    },
    "aws_cloudwatch_event_rule": {
      "update_index_resources-event": {
        "name": "update_index_resources-event",
        "schedule_expression": "@hourly",
        "description": ""
      }
    },
    "aws_cloudwatch_event_target": {
      "update_index_resources-event": {
        "rule": "${aws_cloudwatch_event_rule.update_index_resources-event.name}",
        "target_id": "update_index_resources-event",
        "arn": "${aws_lambda_function.update_index_resources.arn}"
      }
    },
    "aws_lambda_permission": {
      "update_index_resources-event": {
        "function_name": "${aws_lambda_function.update_index_resources.arn}",
        "action": "lambda:InvokeFunction",
        "principal": "events.amazonaws.com",
        "source_arn": "${aws_cloudwatch_event_rule.update_index_resources-event.arn}"
      },
      "rest_api_invoke": {
        "function_name": "${aws_lambda_function.api_handler.arn}",
        "action": "lambda:InvokeFunction",
        "principal": "apigateway.amazonaws.com",
        "source_arn": "${aws_api_gateway_rest_api.rest_api.execution_arn}/*"
      },
      "websocket_connect_invoke_permission": {
        "function_name": "${aws_lambda_function.websocket_connect.function_name}",
        "action": "lambda:InvokeFunction",
        "principal": "apigateway.amazonaws.com",
        "source_arn": "arn:${data.aws_partition.chalice.partition}:execute-api:${data.aws_region.chalice.name}:${data.aws_caller_identity.chalice.account_id}:${aws_apigatewayv2_api.websocket_api.id}/*"
      },
      "websocket_message_invoke_permission": {
        "function_name": "${aws_lambda_function.websocket_message.function_name}",
        "action": "lambda:InvokeFunction",
        "principal": "apigateway.amazonaws.com",
        "source_arn": "arn:${data.aws_partition.chalice.partition}:execute-api:${data.aws_region.chalice.name}:${data.aws_caller_identity.chalice.account_id}:${aws_apigatewayv2_api.websocket_api.id}/*"
      }
    },
    "aws_api_gateway_rest_api": {
      "rest_api": {
        "body": "${local.chalice_api_swagger}",
        "name": "PFun CMA Model Backend",
        "binary_media_types": [
          "application/octet-stream",
          "application/x-tar",
          "application/zip",
          "audio/basic",
          "audio/ogg",
          "audio/mp4",
          "audio/mpeg",
          "audio/wav",
          "audio/webm",
          "image/png",
          "image/jpg",
          "image/jpeg",
          "image/gif",
          "video/ogg",
          "video/mpeg",
          "video/webm"
        ],
        "endpoint_configuration": {
          "types": [
            "REGIONAL"
          ]
        }
      }
    },
    "aws_api_gateway_deployment": {
      "rest_api": {
        "stage_name": "api",
        "stage_description": "${md5(local.chalice_api_swagger)}",
        "rest_api_id": "${aws_api_gateway_rest_api.rest_api.id}",
        "lifecycle": {
          "create_before_destroy": true
        }
      }
    },
    "aws_api_gateway_domain_name": {
      "api_gateway_custom_domain": {
        "domain_name": "api.dev.pfun.app",
        "endpoint_configuration": {
          "types": [
            "REGIONAL"
          ]
        },
        "regional_certificate_arn": "arn:aws:acm:us-east-1:860311922912:certificate/90fd1335-11f8-4c45-b5fa-1ac512e24d39",
        "security_policy": "TLS_1_2"
      }
    },
    "aws_api_gateway_base_path_mapping": {
      "api_gateway_custom_domain_mapping": {
        "stage_name": "api",
        "domain_name": "api.dev.pfun.app",
        "api_id": "${aws_api_gateway_rest_api.rest_api.id}"
      }
    },
    "aws_apigatewayv2_api": {
      "websocket_api": {
        "name": "pfun-cma-model-dev-websocket-api",
        "route_selection_expression": "$request.body.action",
        "protocol_type": "WEBSOCKET"
      }
    },
    "aws_apigatewayv2_integration": {
      "websocket_connect_api_integration": {
        "api_id": "${aws_apigatewayv2_api.websocket_api.id}",
        "connection_type": "INTERNET",
        "content_handling_strategy": "CONVERT_TO_TEXT",
        "integration_type": "AWS_PROXY",
        "integration_uri": "arn:${data.aws_partition.chalice.partition}:apigateway:${data.aws_region.chalice.name}:lambda:path/2015-03-31/functions/arn:${data.aws_partition.chalice.partition}:lambda:${data.aws_region.chalice.name}:${data.aws_caller_identity.chalice.account_id}:function:${aws_lambda_function.websocket_connect.function_name}/invocations"
      },
      "websocket_message_api_integration": {
        "api_id": "${aws_apigatewayv2_api.websocket_api.id}",
        "connection_type": "INTERNET",
        "content_handling_strategy": "CONVERT_TO_TEXT",
        "integration_type": "AWS_PROXY",
        "integration_uri": "arn:${data.aws_partition.chalice.partition}:apigateway:${data.aws_region.chalice.name}:lambda:path/2015-03-31/functions/arn:${data.aws_partition.chalice.partition}:lambda:${data.aws_region.chalice.name}:${data.aws_caller_identity.chalice.account_id}:function:${aws_lambda_function.websocket_message.function_name}/invocations"
      }
    },
    "aws_apigatewayv2_route": {
      "websocket_connect_route": {
        "api_id": "${aws_apigatewayv2_api.websocket_api.id}",
        "route_key": "$connect",
        "target": "integrations/${aws_apigatewayv2_integration.websocket_connect_api_integration.id}"
      },
      "websocket_message_route": {
        "api_id": "${aws_apigatewayv2_api.websocket_api.id}",
        "route_key": "$default",
        "target": "integrations/${aws_apigatewayv2_integration.websocket_message_api_integration.id}"
      }
    },
    "aws_apigatewayv2_deployment": {
      "websocket_api_deployment": {
        "api_id": "${aws_apigatewayv2_api.websocket_api.id}",
        "depends_on": [
          "aws_apigatewayv2_route.websocket_connect_route",
          "aws_apigatewayv2_route.websocket_message_route"
        ]
      }
    },
    "aws_apigatewayv2_stage": {
      "websocket_api_stage": {
        "api_id": "${aws_apigatewayv2_api.websocket_api.id}",
        "deployment_id": "${aws_apigatewayv2_deployment.websocket_api_deployment.id}",
        "name": "api"
      }
    }
  },
  "locals": {
    "chalice_api_swagger": "{\"swagger\": \"2.0\", \"info\": {\"version\": \"1.0\", \"title\": \"PFun CMA Model Backend\"}, \"schemes\": [\"https\"], \"paths\": {\"/sdk\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/static\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}, \"summary\": \"Serves the static files for the web application.\"}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}, \"summary\": \"Generates the index page for the web application.\", \"description\": \"Returns:\\n    Response: The HTTP response object containing the index page.\"}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/routes\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/log\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}}, \"post\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,POST,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/run\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}, \"summary\": \"A function that returns a message containing the welcome message and the\", \"description\": \"routes of the PFun CMA Model API.\"}, \"post\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}, \"summary\": \"A function that returns a message containing the welcome message and the\", \"description\": \"routes of the PFun CMA Model API.\"}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,POST,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/run-at-time\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}}, \"post\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,POST,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/fit\": {\"post\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'POST,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/login-dexcom\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}, \"summary\": \"Handles the Dexcom login request.\"}, \"post\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}, \"summary\": \"Handles the Dexcom login request.\"}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,POST,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}, \"/login-success\": {\"get\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\"}}, \"uri\": \"${aws_lambda_function.api_handler.invoke_arn}\", \"passthroughBehavior\": \"when_no_match\", \"httpMethod\": \"POST\", \"contentHandling\": \"CONVERT_TO_TEXT\", \"type\": \"aws_proxy\"}}, \"options\": {\"consumes\": [\"application/json\"], \"produces\": [\"application/json\"], \"responses\": {\"200\": {\"description\": \"200 response\", \"schema\": {\"$ref\": \"#/definitions/Empty\"}, \"headers\": {\"Access-Control-Allow-Methods\": {\"type\": \"string\"}, \"Access-Control-Allow-Origin\": {\"type\": \"string\"}, \"Access-Control-Allow-Headers\": {\"type\": \"string\"}, \"Access-Control-Expose-Headers\": {\"type\": \"string\"}, \"Access-Control-Max-Age\": {\"type\": \"string\"}, \"Access-Control-Allow-Credentials\": {\"type\": \"string\"}}}}, \"x-amazon-apigateway-integration\": {\"responses\": {\"default\": {\"statusCode\": \"200\", \"responseParameters\": {\"method.response.header.Access-Control-Allow-Methods\": \"'GET,OPTIONS'\", \"method.response.header.Access-Control-Allow-Origin\": \"'*'\", \"method.response.header.Access-Control-Allow-Headers\": \"'Access-Control-Allow-Origin,Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,X-RapidAPI-Host,X-RapidAPI-Key,X-RapidAPI-Proxy-Secret'\", \"method.response.header.Access-Control-Expose-Headers\": \"'X-RapidAPI-Key,X-RapidAPI-Proxy-Secret,X-RapidAPI-Host,X-API-Key,Authorization,Access-Control-Allow-Origin'\", \"method.response.header.Access-Control-Max-Age\": \"'300'\", \"method.response.header.Access-Control-Allow-Credentials\": \"'true'\"}}}, \"requestTemplates\": {\"application/json\": \"{\\\"statusCode\\\": 200}\"}, \"passthroughBehavior\": \"when_no_match\", \"type\": \"mock\", \"contentHandling\": \"CONVERT_TO_TEXT\"}}}}, \"definitions\": {\"Empty\": {\"type\": \"object\", \"title\": \"Empty Schema\"}}, \"x-amazon-apigateway-binary-media-types\": [\"application/octet-stream\", \"application/x-tar\", \"application/zip\", \"audio/basic\", \"audio/ogg\", \"audio/mp4\", \"audio/mpeg\", \"audio/wav\", \"audio/webm\", \"image/png\", \"image/jpg\", \"image/jpeg\", \"image/gif\", \"video/ogg\", \"video/mpeg\", \"video/webm\"]}"
  },
  "terraform": {
    "required_version": ">= 0.12.26, < 1.4.0",
    "required_providers": {
      "aws": {
        "version": ">= 2, < 5"
      },
      "null": {
        "version": ">= 2, < 4"
      }
    }
  },
  "data": {
    "aws_caller_identity": {
      "chalice": {}
    },
    "aws_partition": {
      "chalice": {}
    },
    "aws_region": {
      "chalice": {}
    },
    "null_data_source": {
      "chalice": {
        "inputs": {
          "app": "pfun-cma-model",
          "stage": "dev"
        }
      }
    }
  },
  "output": {
    "EndpointURL": {
      "value": "${aws_api_gateway_deployment.rest_api.invoke_url}"
    },
    "RestAPIId": {
      "value": "${aws_api_gateway_rest_api.rest_api.id}"
    },
    "AliasDomainName": {
      "value": "${aws_api_gateway_domain_name.api_gateway_custom_domain.regional_domain_name}"
    },
    "HostedZoneId": {
      "value": "${aws_api_gateway_domain_name.api_gateway_custom_domain.regional_zone_id}"
    },
    "WebsocketAPIId": {
      "value": "${aws_apigatewayv2_api.websocket_api.id}"
    },
    "WebsocketConnectHandlerArn": {
      "value": "${aws_lambda_function.websocket_connect.arn}"
    },
    "WebsocketConnectHandlerName": {
      "value": "${aws_lambda_function.websocket_connect.function_name}"
    },
    "WebsocketMessageHandlerArn": {
      "value": "${aws_lambda_function.websocket_message.arn}"
    },
    "WebsocketMessageHandlerName": {
      "value": "${aws_lambda_function.websocket_message.function_name}"
    },
    "WebsocketConnectEndpointURL": {
      "value": "wss://${aws_apigatewayv2_api.websocket_api.id}.execute-api.${data.aws_region.chalice.name}.amazonaws.com/api/"
    }
  }
}
