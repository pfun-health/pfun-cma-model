{"openapi":"3.1.0","info":{"title":"PFun CMA Model Backend","description":"Backend API for the PFun CMA Model, providing endpoints for model parameters, data handling, and model execution.","version":"0.3.15"},"paths":{"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint to display the homepage.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/params/schema":{"get":{"summary":"Params Schema","operationId":"params_schema_params_schema_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/params/default":{"get":{"summary":"Default Params","operationId":"default_params_params_default_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/params/describe":{"post":{"summary":"Describe Params","description":"Describe a given (single) or set of parameters using CMAModelParams.describe and generate_qualitative_descriptor.\nArgs:\n    config (Optional[BoundedCMAModelParams | Mapping]): The configuration parameters to describe.\nReturns:\n    dict: Dictionary of parameter descriptions and qualitative descriptors.","operationId":"describe_params_params_describe_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/CMAModelParams"},{"type":"object"}],"title":"Params"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/params/tabulate":{"post":{"summary":"Tabulate Params","description":"Generate a markdown table of a given (single) or set of parameters using CMAModelParams.generate_markdown_table.\nArgs:\n    config (Optional[BoundedCMAModelParams | Mapping]): The configuration parameters to describe.\nReturns:\n    dict: Dictionary of parameter descriptions and qualitative descriptors.","operationId":"tabulate_params_params_tabulate_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/CMAModelParams"},{"type":"object"}],"title":"Params"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/data/sample/download":{"get":{"summary":"Get Sample Dataset","description":"(slow) Download the sample dataset with optional row limit.\n\nArgs:\n    request (Request): The FastAPI request object.\n    nrows (int): The number of rows to return. If -1, return the full dataset.","operationId":"get_sample_dataset_data_sample_download_get","parameters":[{"name":"nrows","in":"query","required":false,"schema":{"type":"integer","default":23,"title":"Nrows"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/data/sample/stream":{"get":{"summary":"Stream Sample Dataset","description":"(faster stream) Stream the sample dataset with optional row limit.\nArgs:\n    request (Request): The FastAPI request object.\n    nrows (int): The number of rows to return. If -1, return the full dataset.","operationId":"stream_sample_dataset_data_sample_stream_get","parameters":[{"name":"nrows","in":"query","required":false,"schema":{"type":"integer","default":23,"title":"Nrows"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/translate-results":{"post":{"summary":"Translate Model Results By Language","description":"Translate model results between Python and JavaScript formats.","operationId":"translate_model_results_by_language_translate_results_post","parameters":[{"name":"from_lang","in":"query","required":true,"schema":{"enum":["python","javascript"],"type":"string","title":"From Lang"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","title":"Results"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/run":{"post":{"summary":"Run Model","description":"Runs the CMA model.","operationId":"run_model_run_post","parameters":[{"name":"config","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CMAModelParams"},{"type":"null"}],"title":"Config"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/run-at-time":{"post":{"summary":"Run At Time Route","description":"Run the CMA model at a specific time.\n\nParameters:\n- t0 (float | int): The start time (in decimal hours).\n- t1 (float | int): The end time (in decimal hours).\n- n (int): The number of samples.\n- config (CMAModelParams): The model configuration parameters.","operationId":"run_at_time_route_run_at_time_post","parameters":[{"name":"t0","in":"query","required":true,"schema":{"anyOf":[{"type":"number"},{"type":"integer"}],"title":"T0"}},{"name":"t1","in":"query","required":true,"schema":{"anyOf":[{"type":"number"},{"type":"integer"}],"title":"T1"}},{"name":"n","in":"query","required":true,"schema":{"type":"integer","title":"N"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/CMAModelParams"},{"type":"null"}],"title":"Config"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health/ws/run-at-time":{"get":{"summary":"Health Check Run At Time","description":"Health check endpoint for the 'run-at-time' WebSocket functionality.","operationId":"health_check_run_at_time_health_ws_run_at_time_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/demo/run-at-time":{"get":{"summary":"Demo Run At Time","description":"Demo UI endpoint to run the model at a specific time (using websockets).","operationId":"demo_run_at_time_demo_run_at_time_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/fit":{"post":{"summary":"Fit Model To Data","operationId":"fit_model_to_data_fit_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_fit_model_to_data_fit_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_fit_model_to_data_fit_post":{"properties":{"data":{"anyOf":[{"type":"object"},{"type":"string"}],"title":"Data"},"config":{"anyOf":[{"$ref":"#/components/schemas/CMAModelParams"},{"type":"string"},{"type":"null"}],"title":"Config"}},"type":"object","required":["data"],"title":"Body_fit_model_to_data_fit_post"},"CMAModelParams":{"properties":{"t":{"anyOf":[{"type":"number"},{},{"type":"null"}],"title":"T"},"N":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"N","default":24},"d":{"type":"number","title":"D","default":0.0},"taup":{"type":"number","title":"Taup","default":1.0},"taug":{"anyOf":[{"type":"number"},{}],"title":"Taug","default":1.0},"B":{"type":"number","title":"B","default":0.05},"Cm":{"type":"number","title":"Cm","default":0.0},"toff":{"type":"number","title":"Toff","default":0.0},"tM":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"number"}],"title":"Tm","default":[7.0,11.0,17.5]},"seed":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"null"}],"title":"Seed"},"eps":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Eps","default":1e-18}},"type":"object","title":"CMAModelParams","description":"Represents the parameters for a CMA model.\n\nArgs:\n    t (Optional[array_like], optional): Time vector (decimal hours). Defaults to None.\n    N (int, optional): Number of time points. Defaults to 24.\n    d (float, optional): Time zone offset (hours). Defaults to 0.0.\n    taup (float, optional): Circadian-relative photoperiod length. Defaults to 1.0.\n    taug (float, optional): Glucose response time constant. Defaults to 1.0.\n    B (float, optional): Glucose Bias constant. Defaults to 0.05.\n    Cm (float, optional): Cortisol temporal sensitivity coefficient. Defaults to 0.0.\n    toff (float, optional): Solar noon offset (latitude). Defaults to 0.0.\n    tM (Tuple[float, float, float], optional): Meal times (hours). Defaults to (7.0, 11.0, 17.5).\n    seed (Optional[int], optional): Random seed. Set to an integer to enable random noise via parameter 'eps'. Defaults to None.\n    eps (float, optional): Random noise scale (\"epsilon\"). Defaults to 1e-18."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}